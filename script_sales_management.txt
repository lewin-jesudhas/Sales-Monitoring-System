DROP TABLE Products CASCADE CONSTRAINTS;
DROP TABLE RegionalOffices CASCADE CONSTRAINTS;
DROP TABLE Salespersons CASCADE CONSTRAINTS;
DROP TABLE Dealers CASCADE CONSTRAINTS;
DROP TABLE Orders CASCADE CONSTRAINTS;
DROP TABLE Payments CASCADE CONSTRAINTS;


REM Products Table
CREATE TABLE Products (
    ProductID INT PRIMARY KEY,
    ProductName VARCHAR(255),
    Price DECIMAL(10, 2),
    Quantity INT
);

REM Regional Offices Table
CREATE TABLE RegionalOffices (
    RegionID INT PRIMARY KEY,
    RegionName VARCHAR(255),
    Location VARCHAR(255),
    Phone INT
);

REM Salespersons Table
CREATE TABLE Salespersons (
    SalespersonID INT PRIMARY KEY,
    Name VARCHAR(255),
    ContactInfo VARCHAR(255),
    RegionID INT,
    TrainingProgress VARCHAR(30),
    Incentives DECIMAL(10, 2) DEFAULT 0.0,
    FOREIGN KEY (RegionID) REFERENCES RegionalOffices(RegionID)
);

REM Dealers Table
CREATE TABLE Dealers (
    DealerID INT PRIMARY KEY,
    Name VARCHAR(255),
    ContactInfo VARCHAR(255),
    RegionID INT,
    FOREIGN KEY (RegionID) REFERENCES RegionalOffices(RegionID)
);

CREATE SEQUENCE order_id_seq START WITH 4 INCREMENT BY 1;
REM Orders Table
CREATE TABLE Orders (
    OrderID INT DEFAULT order_id_seq.NEXTVAL PRIMARY KEY,
    ProductID INT,
    DealerID INT,
    SalespersonID INT,
    Quantity INT,
    OrderDate DATE,
    FOREIGN KEY (ProductID) REFERENCES Products(ProductID),
    FOREIGN KEY (DealerID) REFERENCES Dealers(DealerID),
    FOREIGN KEY (SalespersonID) REFERENCES Salespersons(SalespersonID)
);

REM Payments Table
CREATE SEQUENCE payment_id_seq START WITH 4 INCREMENT BY 1;
CREATE TABLE Payments (
    PaymentID INT DEFAULT payment_id_seq.NEXTVAL PRIMARY KEY,
    OrderID INT,
    Amount DECIMAL(10, 2),
    PaymentDate DATE,
    PaymentMode VARCHAR(50),
    PaymentStatus Varchar(30),
    FOREIGN KEY (OrderID) REFERENCES Orders(OrderID)
);

REM Add CHECK constraint and DEFAULT value to Salespersons Table
ALTER TABLE Salespersons
MODIFY TrainingProgress VARCHAR(20) DEFAULT 'Not Started' CHECK (TrainingProgress IN ('Not Started', 'Started', 'Half Complete', 'Complete'));

ALTER TABLE Payments
MODIFY PaymentStatus VARCHAR(20) DEFAULT 'Not Complete' CHECK (PaymentStatus IN ('Not Complete', '50%', '75%', 'Complete'));

ALTER table RegionalOffices
ADD CHECK (LENGTH(TO_CHAR(Phone))=10);

INSERT INTO Products VALUES (1, 'Milk', 2.5, 100);
INSERT INTO Products VALUES (2, 'Cheese', 5.0, 50);
INSERT INTO Products VALUES (3, 'Butter', 3.0, 75);
SELECT * FROM Products;
INSERT INTO RegionalOffices VALUES (1, 'North Region', 'City A', 9944332211);
INSERT INTO RegionalOffices VALUES (2, 'South Region', 'City B', 9909088776);
INSERT INTO RegionalOffices VALUES (3, 'East Region', 'City C', 9098765432);
SELECT * FROM RegionalOffices;
INSERT INTO Salespersons VALUES (1, 'John Doe', 'john@example.com', 1, 'Started', 500.0);
INSERT INTO Salespersons VALUES (2, 'Jane Smith', 'jane@example.com', 2, 'Not Started', 0.0);
INSERT INTO Salespersons VALUES (3, 'Bob Johnson', 'bob@example.com', 3, 'Complete', 1000.0);
SELECT * FROM Salespersons;
INSERT INTO Dealers VALUES (1, 'ABC Mart', 'abc@example.com', 1);
INSERT INTO Dealers VALUES (2, 'XYZ Store', 'xyz@example.com', 2);
INSERT INTO Dealers VALUES (3, '123 Shop', '123@example.com', 3);
SELECT * FROM Dealers;
INSERT INTO Orders VALUES (1, 1, 1, 1, 20, TO_DATE('2023-10-15', 'YYYY-MM-DD'));
INSERT INTO Orders VALUES (2, 2, 2, 2, 10, TO_DATE('2023-11-20', 'YYYY-MM-DD'));
INSERT INTO Orders VALUES (3, 3, 3, 3, 15, TO_DATE('2023-09-25', 'YYYY-MM-DD'));
SELECT * FROM Orders;
INSERT INTO Payments VALUES (1, 1, 50.0, TO_DATE('2023-10-20', 'YYYY-MM-DD'), 'CASH', 'Complete');
INSERT INTO Payments VALUES (2, 2, 30.0, TO_DATE('2023-11-25', 'YYYY-MM-DD'), 'GPAY', '50%');
INSERT INTO Payments VALUES (3, 3, 45.0, TO_DATE('2023-09-30', 'YYYY-MM-DD'), 'CASH', 'Not Complete');
SELECT * FROM Payments;
INSERT INTO Products VALUES (4, 'Ice Cream', 3.0, 75);
SELECT * FROM Products;

